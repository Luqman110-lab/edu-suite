WARNING: SESSION_SECRET not set. Sessions will not persist across restarts!
Server running on port 5000
[DEBUG] Incoming request: POST /api/login
(node:16716) Warning: SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=require'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.
(Use `node --trace-warnings ...` to show where the warning was created)
POST /api/login 401 in 3445ms :: {"message":"Invalid username or password"}
[DEBUG] Incoming request: POST /api/login
[DEBUG] Incoming request: POST /api/face-embeddings
POST /api/login 200 in 4999ms :: {"id":3,"username":"superadmin","name":"Super …
Face enrollment error: DrizzleQueryError: Failed query: insert into "face_embeddings" ("id", "school_id", "person_type", "person_id", "embedding", "quality", "capture_version", "thumbnail_base64", "is_active", "created_at", "updated_at") values (default, $1, $2, $3, $4, $5, $6, default, default, default, default) on conflict ("school_id","person_type","person_id") do update set "embedding" = $7, "quality" = $8, "updated_at" = $9 returning "id", "school_id", "person_type", "person_id", "embedding", "quality", "capture_version", "thumbnail_base64", "is_active", "created_at", "updated_at"
params: 2,student,1,[0.78,0.27,0.35,0.78,0.44,0.09,0.57,0.46,0.44,0.85,0.24,0.48,0.1,0.93,0.99,0.92,0.03,0.34,0.48,0.35,0.51,0.54,0.04,0.19,0.99,0.11,0.7,0.38,0.41,0.23,0.17,0.64,0.06,0.18,0.99,0.68,0.46,0.92,0.12,0.35,0.77,0.03,0.43,0.11,0.33,0.68,0.1,0.8,0.81,0.85,0.27,0.16,0.83,0.07,0.63,0.19,0.45,0.65,0.98,0.68,0.74,0.28,0.49,0.53,0.42,0.85,0.11,0.29,0.38,0.46,0.47,0.53,0.63,0.96,0.63,0.89,0.63,0.51,0.09,0.53,0.34,0.42,0.07,0.44,0.95,0.39,0.9,0.38,0.15,0.49,0.61,0.08,0.05,0.3,0,0.34,0.3,0.04,0.66,0.35,0.8,0.28,0.47,0.82,0.09,0.16,0.68,0.76,0.83,0.58,0.45,0.19,0.59,0.62,0.72,0.84,0.21,0.37,0.39,0.9,0.06,0.01,0.82,0.67,0.73,0.82,0.24,0.33],0.95,1,[0.78,0.27,0.35,0.78,0.44,0.09,0.57,0.46,0.44,0.85,0.24,0.48,0.1,0.93,0.99,0.92,0.03,0.34,0.48,0.35,0.51,0.54,0.04,0.19,0.99,0.11,0.7,0.38,0.41,0.23,0.17,0.64,0.06,0.18,0.99,0.68,0.46,0.92,0.12,0.35,0.77,0.03,0.43,0.11,0.33,0.68,0.1,0.8,0.81,0.85,0.27,0.16,0.83,0.07,0.63,0.19,0.45,0.65,0.98,0.68,0.74,0.28,0.49,0.53,0.42,0.85,0.11,0.29,0.38,0.46,0.47,0.53,0.63,0.96,0.63,0.89,0.63,0.51,0.09,0.53,0.34,0.42,0.07,0.44,0.95,0.39,0.9,0.38,0.15,0.49,0.61,0.08,0.05,0.3,0,0.34,0.3,0.04,0.66,0.35,0.8,0.28,0.47,0.82,0.09,0.16,0.68,0.76,0.83,0.58,0.45,0.19,0.59,0.62,0.72,0.84,0.21,0.37,0.39,0.9,0.06,0.01,0.82,0.67,0.73,0.82,0.24,0.33],0.95,2026-01-31T05:19:24.529Z
    at NodePgPreparedQuery.queryWithCache (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\src\pg-core\session.ts:73:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async <anonymous> (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\src\node-postgres\session.ts:154:19)
    at async <anonymous> (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\server\routes_extension.ts:29:30) {
  query: 'insert into "face_embeddings" ("id", "school_id", "person_type", "person_id", "embedding", "quality", "capture_version", "thumbnail_base64", "is_active", "created_at", "updated_at") values (default, $1, $2, $3, $4, $5, $6, default, default, default, default) on conflict ("school_id","person_type","person_id") do update set "embedding" = $7, "quality" = $8, "updated_at" = $9 returning "id", "school_id", "person_type", "person_id", "embedding", "quality", "capture_version", "thumbnail_base64", "is_active", "created_at", "updated_at"',
  params: [
    2,
    'student',
    1,
    '[0.78,0.27,0.35,0.78,0.44,0.09,0.57,0.46,0.44,0.85,0.24,0.48,0.1,0.93,0.99,0.92,0.03,0.34,0.48,0.35,0.51,0.54,0.04,0.19,0.99,0.11,0.7,0.38,0.41,0.23,0.17,0.64,0.06,0.18,0.99,0.68,0.46,0.92,0.12,0.35,0.77,0.03,0.43,0.11,0.33,0.68,0.1,0.8,0.81,0.85,0.27,0.16,0.83,0.07,0.63,0.19,0.45,0.65,0.98,0.68,0.74,0.28,0.49,0.53,0.42,0.85,0.11,0.29,0.38,0.46,0.47,0.53,0.63,0.96,0.63,0.89,0.63,0.51,0.09,0.53,0.34,0.42,0.07,0.44,0.95,0.39,0.9,0.38,0.15,0.49,0.61,0.08,0.05,0.3,0,0.34,0.3,0.04,0.66,0.35,0.8,0.28,0.47,0.82,0.09,0.16,0.68,0.76,0.83,0.58,0.45,0.19,0.59,0.62,0.72,0.84,0.21,0.37,0.39,0.9,0.06,0.01,0.82,0.67,0.73,0.82,0.24,0.33]',
    0.95,
    1,
    '[0.78,0.27,0.35,0.78,0.44,0.09,0.57,0.46,0.44,0.85,0.24,0.48,0.1,0.93,0.99,0.92,0.03,0.34,0.48,0.35,0.51,0.54,0.04,0.19,0.99,0.11,0.7,0.38,0.41,0.23,0.17,0.64,0.06,0.18,0.99,0.68,0.46,0.92,0.12,0.35,0.77,0.03,0.43,0.11,0.33,0.68,0.1,0.8,0.81,0.85,0.27,0.16,0.83,0.07,0.63,0.19,0.45,0.65,0.98,0.68,0.74,0.28,0.49,0.53,0.42,0.85,0.11,0.29,0.38,0.46,0.47,0.53,0.63,0.96,0.63,0.89,0.63,0.51,0.09,0.53,0.34,0.42,0.07,0.44,0.95,0.39,0.9,0.38,0.15,0.49,0.61,0.08,0.05,0.3,0,0.34,0.3,0.04,0.66,0.35,0.8,0.28,0.47,0.82,0.09,0.16,0.68,0.76,0.83,0.58,0.45,0.19,0.59,0.62,0.72,0.84,0.21,0.37,0.39,0.9,0.06,0.01,0.82,0.67,0.73,0.82,0.24,0.33]',
    0.95,
    '2026-01-31T05:19:24.529Z'
  ],
  cause: error: column "quality" of relation "face_embeddings" does not exist
      at C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\pg-pool\index.js:45:11
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async <anonymous> (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\src\node-postgres\session.ts:161:13)
      at async NodePgPreparedQuery.queryWithCache (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\src\pg-core\session.ts:71:12)
      at async <anonymous> (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\node_modules\src\node-postgres\session.ts:154:19)
      at async <anonymous> (C:\Users\DELL\Downloads\broadway-report-card-system-4zip-1zip\broadway-report-card-system-4zip\server\routes_extension.ts:29:30) {
    length: 135,
    severity: 'ERROR',
    code: '42703',
    detail: undefined,
    hint: undefined,
    position: '92',
    internalPosition: undefined,
    internalQuery: undefined,
    where: undefined,
    schema: undefined,
    table: undefined,
    column: undefined,
    dataType: undefined,
    constraint: undefined,
    file: 'parse_target.c',
    line: '1065',
    routine: 'checkInsertTargets'
  }
}
POST /api/face-embeddings 500 in 4485ms :: {"message":"Failed to enroll face: F…
[DEBUG] Incoming request: POST /api/login
[DEBUG] Incoming request: POST /api/face-embeddings
POST /api/login 200 in 5548ms :: {"id":3,"username":"superadmin","name":"Super …
POST /api/face-embeddings 200 in 4514ms :: {"id":1,"schoolId":2,"personType":"s…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 2243ms :: {"match":true,"person":{"id…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 2236ms :: {"match":true,"person":{"id…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 1906ms :: {"match":false,"distance":4…
[DEBUG] Incoming request: POST /api/login
[DEBUG] Incoming request: POST /api/face-embeddings
POST /api/login 200 in 4693ms :: {"id":3,"username":"superadmin","name":"Super …
POST /api/face-embeddings 200 in 4448ms :: {"id":1,"schoolId":2,"personType":"s…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 2271ms :: {"match":true,"person":{"id…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 2287ms :: {"match":true,"person":{"id…
[DEBUG] Incoming request: POST /api/face-embeddings/identify
POST /api/face-embeddings/identify 200 in 1859ms :: {"match":false,"distance":4…
